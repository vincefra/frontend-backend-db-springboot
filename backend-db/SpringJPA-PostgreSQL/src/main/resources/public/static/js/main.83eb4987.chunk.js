(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,n){e.exports=n(217)},127:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(18),i=n.n(s),c=n(57),l=n(36),o=n(13),u=n.n(o),p=n(21),h=n(2),d=n(62),m=n(5),f=n(6),g=n(8),y=n(7),v=n(9),b=(n(127),n(4)),j=50,E=25,k=j/2,O=40,x=40,w=2*Math.PI/180,S=1.2*Math.PI/180,C=40;function P(e,t){var n=b.a().padAngle(S).cornerRadius(4),a=b.a().outerRadius(t+x).innerRadius(t+x),r=b.s().sort(null).value(function(e){return"category"===e.type?3:e.hours})(e.annularSectors);console.log(e.annularSectors);var s=[];return{clientSlice:r.map(function(r,i){var c,l=n({startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:t-j,outerRadius:t}),o=a.centroid(r),u="start",p=o,h=O/2;(c=[o[0]-h,o[1]-h])[0]>0&&c[1]<0?p=[o[0]+h+10,o[1]]:c[0]<0&&c[1]<0?(p=[o[0]-h-10,o[1]+5],u="end"):c[0]<0&&c[1]>0?(p=[o[0]-h-10,o[1]+5],u="end"):c[0]>0&&c[1]>0&&(p=[o[0]+h+10,o[1]]);var d={centroid:c};if("client"===r.data.type){var m=e.projects.filter(function(e){return r.data.projects.includes(e.id)}),f=function(e,t,n,a){var r=b.u().domain([0,2*Math.PI]).range([e,t]),s=b.a().padAngle(.013).cornerRadius(50);return b.s().sort(null).value(function(e){return e.brushedDisplay?e.hours:0})(n).map(function(e){var t=s({startAngle:r(e.startAngle),endAngle:r(e.endAngle),innerRadius:a-k-E/2,outerRadius:a-k+E/2});return e.path=t,e}).filter(function(e){return e.data.brushedDisplay})}(r.startAngle+w,r.endAngle-w,m,t);s=s.concat(f)}return{path:l,fill:r.data.color,logo:d,textAnchor:u,textPos:p,img:r.data.logo,id:r.data.id,highlight:r.data.highlight,data:r.data}}),projectSlice:s}}function D(e){var t=e.filter(function(e){return!0===e.highlight}),n={name:"Front-End",children:t.length>C?e.slice(0,C):t},a=b.o(n).sort(function(e,t){return e.data.name.localeCompare(t.data.name)}),r=b.C(),s=b.u().domain([0,1]).range([0,360]),i=r(a);for(var c in i.children){var l=i.children[c];l.angle=s(l.x),l.textRotation=-l.angle,l.anchorText=l.angle<90||l.angle>270?"start":"end"}return i}function L(e){var t=e.split(" ");return"".concat(t[0].charAt(0),".").concat(t[t.length-1].charAt(0))}var N=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={clientSlice:[],projectSlice:[],currentShowingProject:null},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.size[1],t=e-.67*e,n=P(this.props,t),a=n.clientSlice,r=n.projectSlice;this.setState({clientSlice:a,projectSlice:r,radius:t})}},{key:"componentWillReceiveProps",value:function(e){var t=P(e,this.state.radius),n=t.clientSlice,a=t.projectSlice;this.setState({clientSlice:n,projectSlice:a})}},{key:"showProject",value:function(e){var t=e.data,n=this.state.currentShowingProject,a=this.props,r=a.mouseOnProject,s=a.mouseOutProject;n!==t.id?(s(),r(t.id),this.setState({currentShowingProject:t.id})):(s(),this.setState({currentShowingProject:null}))}},{key:"render",value:function(){var e=this,t=this.props.size[0],n=this.props.size[1],a=r.a.createElement("g",{transform:"translate(".concat(t/2,", ").concat(n/2,")")},this.state.clientSlice.map(function(t,n){return r.a.createElement("g",{key:n,opacity:t.highlight?"1":"0.2"},r.a.createElement("path",{d:t.path,stroke:"#dc3545",fillOpacity:"0",strokeWidth:"6",opacity:t.data.hours>0&&t.data.selected?1:0}),"category"===t.data.type?r.a.createElement("path",{d:t.path,fill:t.fill,onMouseOver:function(){e.props.mouseOnClient(t.id)},onMouseOut:function(){return e.props.mouseOutClient()},onClick:function(){return e.props.clientClick(t.data)}}):r.a.createElement("path",{d:t.path,fill:t.fill,onClick:function(){return e.props.clientClick(t.data)}}))})),s=r.a.createElement("g",{transform:"translate(".concat(t/2,", ").concat(n/2,")")},this.state.projectSlice.map(function(t,n){return r.a.createElement("g",{key:n,opacity:t.data.highlight?"1":"0.2"},r.a.createElement("path",{d:t.path,stroke:"#dc3545",fillOpacity:"0",strokeWidth:"6",opacity:t.data.selected?1:0}),r.a.createElement("path",{d:t.path,fill:"#FFFFFF",onClick:function(){return e.showProject(t)}}))})),i=r.a.createElement("g",{transform:"translate(".concat(t/2,", ").concat(n/2,")")},this.state.clientSlice.map(function(t,n){var a="category"===t.data.type||"more"===t.data.type?r.a.createElement("text",{x:t.textPos[0],y:t.textPos[1],opacity:t.data.textHighlight?"1":"0",textAnchor:t.textAnchor,fill:t.fill,onClick:function(){return e.props.clientClick(t.data)},className:"label"},t.data.name):r.a.createElement("g",null);return t.data.hours>0?r.a.createElement("g",{key:n},r.a.createElement("image",{key:n,width:40,height:40,x:t.logo.centroid[0],y:t.logo.centroid[1],xlinkHref:t.img,opacity:t.highlight?"1":"0.2",onClick:function(){return e.props.clientClick(t.data)}}),a):""}));return r.a.createElement(r.a.Fragment,null,a,i,s)}}]),t}(r.a.Component),I=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({circle:{circle:{radius:"28",fill:"#98abc5",x:"0",y:"0"}}})}},{key:"render",value:function(){var e=this,t=this.state.circle?this.state.circle:null,n="mask"+this.props.id,a="url(#mask"+this.props.id+")",s=this.props.img?r.a.createElement("circle",{r:this.props.radius,cy:this.props.pY,cx:this.props.pX,fill:a}):r.a.createElement("text",{textAnchor:"middle",x:this.props.pX,y:this.props.pY+1,dominantBaseline:"middle",fontSize:this.props.radius,className:"initials"},L(this.props.name)),i=this.props.selected?r.a.createElement("circle",{cx:this.props.pX,cy:this.props.pY,r:this.props.radius,stroke:"#dc3545",fillOpacity:"0",strokeWidth:"3"}):"";return r.a.createElement("g",null,t?r.a.createElement("g",{onClick:function(){return e.props.mouseOnEmployee(e.props.id)},opacity:this.props.opacity},r.a.createElement("circle",{cx:this.props.pX,cy:this.props.pY,r:this.props.radius,fill:t.circle.fill}),r.a.createElement("g",null,r.a.createElement("defs",{id:"imgdefs"},r.a.createElement("pattern",{id:n,height:"1",width:"1",x:"0",y:"0"},r.a.createElement("image",{height:2*this.props.radius,width:2*this.props.radius,xlinkHref:this.props.img}))),s,i)):r.a.createElement("h4",null,"No image"))}}]),t}(r.a.Component),M=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).handleMouseOn=function(e){e.data.brushedDisplay&&n.props.mouseOnEmployee(e.data.id)},n.state={currentShowingEmployee:null},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).employees;this.setLayout(e)}},{key:"componentDidUpdate",value:function(e){this.sameEmployees(e.employees,this.props.employees)||this.setLayout(this.props.employees)}},{key:"showEmployee",value:function(e){var t=e.data,n=this.state.currentShowingEmployee,a=this.props,r=a.mouseOnEmployee,s=a.mouseOutEmployee;n!==t.id?(s(),r(t.id),this.setState({currentShowingEmployee:t.id})):(s(),this.setState({currentShowingEmployee:null}))}},{key:"sameEmployees",value:function(e,t){if(e.length!==t.length)return!1;var n=e.map(function(e){return e.id}),a=e.map(function(e){return e.id});return 0===n.filter(function(e){return!a.includes(e)}).length}},{key:"setLayout",value:function(e){var t=b.o({name:"employees",children:e}),n=this.props.size[1],a=n-.58*n,r=b.r();r.size([a,a]),r.padding(10),t.sum(function(e){return 50});var s=r(t);this.setState({layout:s})}},{key:"render",value:function(){var e=this,t=this.props.size[0],n=this.props.size[1],a=n-.58*n,s=void 0!==this.state.layout?this.state.layout.children.map(function(t,n){return r.a.createElement(I,{key:n,name:t.data.name,img:t.data.img,radius:t.r,selected:t.data.selected,pX:t.x,pY:t.y,id:t.data.id,mouseOnEmployee:function(){return e.showEmployee(t)},opacity:t.data.highlight&&t.data.brushedDisplay?"1":"0.1"})}):"";return r.a.createElement("g",{ref:"employees",transform:"translate(".concat(t/2-a/2,", ").concat(n/2-a/2,")")},r.a.createElement("g",{ref:"graph"},s))}}]),t}(r.a.Component),T=(r.a.Component,function(e){function t(){return Object(m.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=r.a.createElement(N,{annularSectors:this.props.annularSectors,clients:this.props.clients,projects:this.props.projects,size:this.props.size,mouseOnProject:this.props.mouseOnProject,mouseOutProject:this.props.unHighlightElements,mouseOnClient:this.props.mouseOnClient,mouseOutClient:this.props.unHighlightElements,clientClick:this.props.clientClick}),t=this.props.employees.length>0?r.a.createElement(M,{employees:this.props.employees,size:this.props.size,mouseOnEmployee:this.props.mouseOnEmployee,mouseOutEmployee:this.props.unHighlightElements}):"";return r.a.createElement("svg",{className:"circle-visualization",width:this.props.size[0],height:this.props.size[1]},e,t)}}]),t}(r.a.Component)),A=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={data:0,text:""},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({type:this.props.type,text:this.setText(this.props.data,this.props.label)})}},{key:"componentDidUpdate",value:function(e){e.data!==this.props.data&&this.setState({text:this.setText(this.props.data,this.props.label)})}},{key:"setText",value:function(e,t){var n="".concat(e," ").concat(t);return 1!==e&&("s"===t.charAt(t.length-1)?n+="'":n+="s"),n}},{key:"render",value:function(){var e=this;return r.a.createElement("li",{className:"legend-item"},r.a.createElement("div",{role:"menuitem",className:"thing",onMouseEnter:function(){return e.props.overEvent(e.props.type)},onMouseLeave:function(){return e.props.outEvent()}},r.a.createElement("i",{className:this.props.icon}),this.state.text))}}]),t}(r.a.Component);function R(e,t){return e.map(function(e){return t[e]})}function z(e,t){e.push.apply(e,Object(h.a)(t.filter(function(t){return!e.includes(t)})))}var Y=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={totalClients:0,totalProjects:0,totalEmployees:0,totalSkills:0,refresh:!1},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.resetLegends(this.props),this.setState({totalProjects:this.props.projectsCount})}},{key:"componentDidUpdate",value:function(e){e.refreshLegends!==this.props.refreshLegends&&this.resetLegends(this.props),this.equal(e.client,this.props.client)&&this.equal(e.project,this.props.project)&&this.equal(e.employee,this.props.employee)||(this.props.client||this.props.project||this.props.employee?this.calculateData(this.props):this.resetLegends(this.props))}},{key:"calculateData",value:function(e){var t=e.client,n=e.project,a=e.employee;t&&this.calculateClient(e),n&&this.calculateProject(e),a&&this.calculateEmployee(e)}},{key:"calculateClient",value:function(e){var t=e.client,n=e.projects.filter(function(e){return e.brushedDisplay}).filter(function(e){return t.projects.includes(e.id)}),a=[],r=[];n.forEach(function(e){z(a,e.employees),z(r,e.skills)}),this.setState({totalClients:1,totalProjects:n.length,totalEmployees:a.length,totalSkills:r.length})}},{key:"calculateEmployee",value:function(e){var t=e.employee,n=e.clients,a=e.projects.filter(function(e){return e.employees.includes(t.id)&&e.brushedDisplay}),r=a.map(function(e){return e.clientId}),s=n.filter(function(e){return e.employees.includes(t.id)&&r.includes(e.id)}).length,i=t.skills.length;this.setState({totalClients:s,totalProjects:a.length,totalEmployees:1,totalSkills:i})}},{key:"calculateProject",value:function(e){var t=e.project;this.setState({totalClients:1,totalProjects:1,totalEmployees:t.employees.length,totalSkills:t.skills.length})}},{key:"resetLegends",value:function(e){var t=e.clients,n=e.projects,a=e.employees,r=n.filter(function(e){return e.brushedDisplay}),s=a.filter(function(e){return e.brushedDisplay}),i=r.map(function(e){return e.clientId}),c=t.filter(function(e){return i.includes(e.id)}).length,l=[];r.forEach(function(e){return z(l,e.skills)}),a.forEach(function(e){return z(l,e.skills)}),this.setState({totalClients:c,totalProjects:r.length,totalEmployees:s.length,totalSkills:l.length})}},{key:"equal",value:function(e,t){return e===t&&(e===t||(e.id===t.id||e.type===t.type))}},{key:"render",value:function(){var e=this.state,t=e.totalEmployees,n=e.totalClients,a=e.totalProjects,s=e.totalSkills;return r.a.createElement("div",{className:"legend"},r.a.createElement("ul",null,r.a.createElement(A,{data:n,type:"CLIENTS",label:"client",overEvent:this.props.overEvent,outEvent:this.props.outEvent,icon:"fas fa-building"}),r.a.createElement(A,{data:a,type:"PROJECTS",label:"project",overEvent:this.props.overEvent,outEvent:this.props.outEvent,icon:"fas fa-square"}),r.a.createElement(A,{data:t,type:"EMPLOYEES",label:"employee",overEvent:this.props.overEvent,outEvent:this.props.outEvent,icon:"fas fa-user"}),r.a.createElement(A,{data:s,type:"SKILLS",label:"skill",overEvent:this.props.overEvent,outEvent:this.props.outEvent,icon:"fas fa-wrench"})))}}]),t}(r.a.Component),B=n(20),F=n.n(B),H=n(223),G="".concat("","/img/employees/employee_placeholder.jpg"),V=function(e){function t(){return Object(m.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"setText",value:function(e,t){switch(t){case"CLIENT":return r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Location: "),r.a.createElement("br",null),e.location),r.a.createElement("p",null,e.description));case"EMPLOYEE":return r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Start date: "),r.a.createElement("br",null),e.dateInit),r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"End date: "),r.a.createElement("br",null),e.dateEnd),r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Location: "),r.a.createElement("br",null),e.location),r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Birthyear: "),r.a.createElement("br",null),e.birthYear),r.a.createElement(c.b,{to:"/employeeview/".concat(e.id)},r.a.createElement(H.a,null,"READ MORE")));case"PROJECT":return r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Client: "),r.a.createElement("br",null),e.clientName),r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Start date: "),r.a.createElement("br",null),F()(e.dateInit).format("YYYY-MM-DD")),r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"End date: "),r.a.createElement("br",null),F()(e.dateEnd).format("YYYY-MM-DD")),r.a.createElement("p",null,e.description));default:return r.a.createElement("div",null)}}},{key:"setName",value:function(e,t){switch(t){case"CLIENT":return e.name;case"EMPLOYEE":case"PROJECT":return e.name;default:return""}}},{key:"setCategory",value:function(e,t){switch(t){case"CLIENT":return e.category;case"EMPLOYEE":return e.roll;case"PROJECT":return e.type;default:return""}}},{key:"setImage",value:function(e,t){switch(t){case"CLIENT":case"PROJECT":return r.a.createElement("img",{src:e.logo,alt:e.name});case"EMPLOYEE":return r.a.createElement("img",{src:e.img?e.img:G,alt:e.name});default:return r.a.createElement("i",{className:"fas fa-laptop-code"})}}},{key:"render",value:function(){var e=this.props,t=e.dialogueIsShown,n=e.dialogueInfo,a=n.data,s=n.type,i=a?this.setImage(a,s):r.a.createElement("i",{className:"fas fa-laptop-code"}),c=a?this.setText(a,s):r.a.createElement("div",null),l=a?this.setCategory(a,s):"",o=a?this.setName(a,s):"";return r.a.createElement("div",null,r.a.createElement("div",{className:t?"dialogue":"dialogue hidden"},r.a.createElement("div",{className:"identification"},i,r.a.createElement("div",{className:"spacing x-small"}),r.a.createElement("h2",null,o),r.a.createElement("p",null,l)),r.a.createElement("div",{className:"information"},c)))}}]),t}(r.a.Component),W=n(85),J=(n(186),(0,W.a.createSliderWithTooltip)(W.a.Range)),_=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).getFormatedDate=function(e){return n.props.formatDate(e)},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props.filterPosition[0],n=this.props.filterPosition[1];return r.a.createElement("div",{className:"filter"},r.a.createElement(J,{min:this.props.minFilterValue,max:this.props.maxFilterValue,defaultValue:[this.props.defaultValueMin,this.props.defaultValueMax],value:[t,n],steps:1,onChange:function(t){return e.props.afterChangeFunction(t[0],t[1])},tipFormatter:function(t){return e.getFormatedDate(t)}}))}}]),t}(a.Component),q=50,K=30,U=50,X=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).xAxis=b.b(),n.monthAxis=b.c(),n.yearAxis=b.c(),n.state={},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({})}},{key:"componentDidUpdate",value:function(){this.xAxis.ticks(b.A.every(1)),this.xAxis.scale(this.state.xScale),this.xAxis.tickPadding(10),this.xAxis.tickSize(0);var e=this.props.projects.length>0?100-K:0;this.monthAxis.tickFormat(""),this.monthAxis.tickSize(e),this.monthAxis.ticks(b.z.every(1)),this.monthAxis.scale(this.state.xScale),this.yearAxis.tickFormat(""),this.yearAxis.tickSize(e),this.yearAxis.ticks(b.A.every(1)),this.yearAxis.scale(this.state.xScale),b.x(this.refs.xAxis).call(this.xAxis),b.x(this.refs.monthAxis).call(this.monthAxis),b.x(this.refs.yearAxis).call(this.yearAxis)}},{key:"render",value:function(){var e=this,t=0===this.state.numLevels?25:(100-K)/(this.state.numLevels+1),n=this.state.bars.map(function(n){return r.a.createElement("g",{key:n.id,opacity:n.brushedDisplay?n.opacity:.2,onMouseOver:function(){n.brushedDisplay&&e.props.selectProject(n.id)},onMouseOut:function(){return e.props.mouseOutProject()}},r.a.createElement("rect",{x:n.x,y:n.y-t-t*n.level,rx:"5",ry:"5",width:n.width,height:t,fill:n.fill}),r.a.createElement("rect",{x:n.x+1,y:n.y-t-t*n.level+1,rx:"5",ry:"5",width:n.width-1,height:t-1,stroke:"#dc3545",fillOpacity:"0",strokeWidth:"3",opacity:n.selected?1:0}))}),a=r.a.createElement(_,{beforeVal:"",afterVal:"",filterName:"Time",filterLeftValue:"",filterRightValue:"",minFilterValue:0,maxFilterValue:this.props.totalProjectsMonths,defaultValueMin:0,defaultValueMax:this.props.totalProjectsMonths,step:1,afterChangeFunction:this.props.modifyRange,filterPosition:this.props.filterPosition,formatDate:this.props.formatDate}),s=r.a.createElement("g",{className:"axisMonths",ref:"monthAxis",transform:"translate(".concat(U,", ").concat(100-K,")")}),i=r.a.createElement("g",{className:"yearAxis",ref:"yearAxis",transform:"translate(".concat(U,", ").concat(100-K,")")}),c=r.a.createElement("g",{ref:"xAxis",transform:"translate(".concat(U,", ").concat(100-K,")")});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:this.props.displayTimeline?"timeLine":"timeLine hidden"},r.a.createElement("svg",{width:this.props.size[0],height:100},s,c,i,n),a))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.annularSectors,a=e.projects,r=e.size,s=e.range;if(!a)return{};var i=s,c=b.w().domain(i).range([0,r[0]-q-U]),l=n.find(function(e){return"more"===e.type});l&&(a=a.filter(function(e){return!l.projects.includes(e.id)}));for(var o=a.map(function(e){return{x:U+c(new Date(e.dateInit)),y:100-K,width:c(e.dateEnd)-c(e.dateInit),height:10,fill:e.highlight?e.color:"#333333",level:0,id:e.id,opacity:e.highlight?"1":"0.2",selected:e.selected,brushedDisplay:e.brushedDisplay}}),u=0,p=0;p<o.length;p++)for(var h=o[p],d=h.level,m=p-1;m>=0;m--){var f=o[m];h.x<=f.width+f.x&&(d===f.level?d+=1:f.level>d&&(d=f.level+1),h.level=d,u=Math.max(d,u))}return{bars:o,xScale:c,numLevels:u}}}]),t}(a.Component),$=n(221),Q=n(222),Z=n(117);function ee(e,t){var n=t.projects,a=t.employees,r=t.skills,s=t.clients,i=t.selectedObjects,c=e.toLowerCase();if(c.length>0&&""!==c&&" "!==c){var l=n.filter(function(e){var t=e.name.toLowerCase();return e.searchType="PROJECT",t.includes(c)&&!te(e,i)}),o=a.filter(function(e){var t=e.name.toLowerCase();return e.searchType="EMPLOYEE",t.includes(c)&&!te(e,i)}),u=r.filter(function(e){var t=e.name.toLowerCase();return e.searchType="SKILL",t.includes(c)&&!te(e,i)}),p=s.filter(function(e){var t=e.name.toLowerCase();return e.searchType="CLIENT",t.includes(c)&&!te(e,i)});return[].concat(Object(h.a)(l),Object(h.a)(o),Object(h.a)(u),Object(h.a)(p))}return[]}function te(e,t){return t.find(function(t){return t.id===e.id&&t.searchType===e.searchType})}function ne(e,t){return t.filter(function(t){return t.id!==e.id&&t.searchType!==e.searchType})}function ae(e){switch(e.searchType){case"EMPLOYEE":return r.a.createElement("i",{className:"fas fa-user"});case"CLIENT":return r.a.createElement("i",{className:"fas fa-building"});case"PROJECT":return r.a.createElement("i",{className:"fas fa-square"});case"SKILL":return r.a.createElement("i",{className:"fas fa-wrench"});default:return r.a.createElement("i",{className:"fas fa-question-circle"})}}var re=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={},n.mouseOverHandler=function(e){if("SKILL"===e.searchType)n.props.toggleDialogue(!1);else if("PROJECT"===e.searchType){var t=n.props.getProjectLogo(e.id);n.props.toggleDialogue(),n.props.showObjectInformation(Object(d.a)({},e,{clientName:e.name,logo:t}),"PROJECT")}else n.props.toggleDialogue(),n.props.showObjectInformation(e,e.searchType)},n.removeObject=function(){n.props.removeSelectedObject(n.props.item)},n.clickHandler=function(e){n.props.clickHandler(n.props.item),n.props.clearSearch()},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=ae(this.props.item);return r.a.createElement("li",{className:"result",key:this.props.item.name+"_"+this.props.item.id,onMouseOver:function(){return e.mouseOverHandler(e.props.item)},onMouseOut:function(){return e.props.toggleDialogue(!1)},onMouseDown:function(){return e.clickHandler(e.props.item)}},r.a.createElement("i",null,t),this.props.item.name)}}]),t}(r.a.Component),se=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).handleChange=function(e){console.log(n.props);var t=ee(e.target.value,n.props);n.setState({list:t,searchWord:e.target.value})},n.clearSearch=function(){n.setState({searchWord:"",list:[]}),n.setState({focus:!1}),n.props.toggleDialogue(!1)},n.removeFromResults=function(e){var t=ne(e,n.state.list);n.setState({list:t})},n.handleClick=function(e){n.node.contains(e.target)||n.handleClickOutside()},n.handleClickOutside=function(){n.clearSearch(),document.removeEventListener("mousedown",n.handleClick,!1),document.removeEventListener("keydown",n.handleEsc,!1)},n.handleEsc=function(e){"Escape"===e.key&&(n.clearSearch(),document.removeEventListener("keydown",n.handleEsc,!1),n.node.blur())},n.focusElement=function(e){document.addEventListener("mousedown",n.handleClick,!1),document.addEventListener("keydown",n.handleEsc,!1),n.setState({focus:!0})},n.state={list:[],searchWord:"",focus:!1},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"search-input"},r.a.createElement(Z.a,{ref:function(t){return e.node=t},value:this.state.searchWord,type:"text",placeholder:"Search",className:"search-bar",onChange:this.handleChange,onMouseDown:this.focusElement}),this.state.focus&&r.a.createElement("i",{className:"fas fa-times-circle",onMouseDown:function(){return e.clearSearch()}})),r.a.createElement("div",{className:"results"},r.a.createElement("ul",null,this.state.list.map(function(t,n){return r.a.createElement(re,{key:n,item:t,showObjectInformation:e.props.showObjectInformation,toggleDialogue:e.props.toggleDialogue,clickHandler:e.props.addSelectedObject,removeSelectedObject:e.props.removeSelectedObject,clearSearch:e.clearSearch,getProjectLogo:e.props.getProjectLogo})}))))}}]),t}(r.a.Component),ie=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={crumbs:[]},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.setState({crumbs:[this.props.clickedClient]})}},{key:"componentDidUpdate",value:function(e,t){if(0!==this.props.clickedClient.length&&!this.isEqual(e.clickedClient,this.props.clickedClient)){var n=[].concat(Object(h.a)(t.crumbs),[this.props.clickedClient]);this.setState({crumbs:n})}}},{key:"handleClick",value:function(e){if(e+1!==this.state.crumbs.length){var t=this.state.crumbs[e];this.props.breadcrumbClick(t,!0);var n=this.state.crumbs.slice(0,e+1);this.setState({crumbs:n})}}},{key:"isEqual",value:function(e,t){if(""===t.id&&""===t.name&&""===t.type)return!0;if(e.id===t.id&&e.type===t.type&&e.name===t.name){if("category"===e.type||"more"===e.type){if(e.list.length!==t.list.length)return!1;for(var n in e.list)if(!this.isEqual(e.list[n],t.list[n]))return!1}return!0}return!1}},{key:"render",value:function(){var e=this,t=this.state.crumbs.map(function(t,n){return r.a.createElement("span",{className:"crumb",onClick:e.handleClick.bind(e,n),key:n})});return r.a.createElement("div",{className:"breadcrumbs"},t)}}]),t}(r.a.Component),ce=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={},n.removeObject=function(){n.props.removeSelectedObject(n.props.object)},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("li",{className:"tag"},r.a.createElement("span",null,this.props.name),r.a.createElement("i",{className:"fas fa-times-circle",onMouseDown:function(){return e.removeObject()}}))}}]),t}(a.Component),le=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(g.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this,t=this.props.selectedObjects.map(function(t,n){return r.a.createElement(ce,{key:n,name:t.name,removeSelectedObject:e.props.removeSelectedObject,object:t})});return r.a.createElement("ul",{className:"tag-list"},t)}}]),t}(a.Component),oe=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement($.a,{className:"header",variant:"header",expand:"lg"},r.a.createElement("div",{className:"h-row"},r.a.createElement("div",null,r.a.createElement("img",{src:"img/logos/findOut.png",alt:"FindOut",className:"brandLogo"}),r.a.createElement(Q.a,{inline:!0,className:"searchForm",onSubmit:function(e){return e.preventDefault()}},r.a.createElement(se,{clients:this.props.clients,projects:this.props.projects,employees:this.props.employees,skills:this.props.skills,showObjectInformation:this.props.showObjectInformation,toggleDialogue:this.props.toggleDialogue,addSelectedObject:this.props.addSelectedObject,removeSelectedObject:this.props.removeSelectedObject,selectedObjects:this.props.selectedObjects,getProjectLogo:this.props.getProjectLogo})),r.a.createElement(le,{selectedObjects:this.props.selectedObjects,removeSelectedObject:this.props.removeSelectedObject})),r.a.createElement("div",{className:"right"},r.a.createElement(H.a,{className:"ml-auto p-2",variant:"light"},r.a.createElement("i",{className:"far fa-question-circle"})))),r.a.createElement("div",{className:"h-row"},r.a.createElement(ie,{clickedClient:this.props.clickedClient,breadcrumbClick:this.props.breadcrumbClick})))}}]),t}(a.Component),ue=function(e){function t(){return Object(m.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("p",{className:"spinner"}))}}]),t}(r.a.Component),pe=function(e){function t(){return Object(m.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"title ".concat(this.props.isHighlighted?"hide":"")},this.props.title)}}]),t}(r.a.Component),he=n(40),de=n.n(he),me="";function fe(){return ge.apply(this,arguments)}function ge(){return(ge=Object(p.a)(u.a.mark(function e(){var t,n,a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(me,"employee/all/zero"),n={url:t,responseType:"json",method:"GET"},e.prev=2,e.next=5,de()(n);case 5:a=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",{});case 11:if(200!==a.status){e.next=14;break}return r=a.data,e.abrupt("return",{employees:r});case 14:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}function ye(){return ve.apply(this,arguments)}function ve(){return(ve=Object(p.a)(u.a.mark(function e(){var t,n,a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(me,"customer/all/zero"),n={url:t,responseType:"json",method:"GET"},e.prev=2,e.next=5,de()(n);case 5:a=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",{});case 11:if(200!==a.status){e.next=14;break}return r=a.data,e.abrupt("return",{clients:r});case 14:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}function be(){return je.apply(this,arguments)}function je(){return(je=Object(p.a)(u.a.mark(function e(){var t,n,a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(me,"project/all/zero"),n={url:t,responseType:"json",method:"GET"},e.prev=2,e.next=5,de()(n);case 5:a=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",{});case 11:if(200!==a.status){e.next=14;break}return r=a.data,e.abrupt("return",{projects:r});case 14:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}function Ee(){return ke.apply(this,arguments)}function ke(){return(ke=Object(p.a)(u.a.mark(function e(){var t,n,a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t="".concat(me,"project/total"),n={url:t,responseType:"json",method:"GET"},e.prev=2,e.next=5,de()(n);case 5:a=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",{});case 11:if(200!==a.status){e.next=14;break}return r=a.data,e.abrupt("return",{projectsCount:r});case 14:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}var Oe,xe=n(61),we=n.n(xe),Se=new we.a;function Ce(e){return new Promise(function(t,n){var a=new Image;a.onload=function(){var e=Se.getColor(a);e=e.map(function(e){return 1===(e=parseInt(e).toString(16)).length?"0"+e:e}),t("#".concat(e.join("")))},a.onerror=function(){return n("")},a.src="".concat("").concat(e)})}function Pe(e){return new Promise(function(t,n){var a=new Image;a.onload=function(){return t()},a.onerror=function(){return n()},a.src="".concat("").concat(e)})}function De(e){return Le.apply(this,arguments)}function Le(){return(Le=Object(p.a)(u.a.mark(function e(t){var n,a,r,s,i,c,l,o,p,h,d,m,f,g,y,v,b,j,E,k,O,x,w;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n={},a=!0,r=!1,s=void 0,e.prev=4,i=t[Symbol.iterator]();!(a=(c=i.next()).done);a=!0)(l=c.value).category in n?n[l.category].push(l):n[l.category]=[l];e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),r=!0,s=e.t0;case 12:e.prev=12,e.prev=13,a||null==i.return||i.return();case 15:if(e.prev=15,!r){e.next=18;break}throw s;case 18:return e.finish(15);case 19:return e.finish(12);case 20:console.log(n),o=[],p=t.length,e.t1=u.a.keys(n);case 24:if((e.t2=e.t1()).done){e.next=63;break}return h=e.t2.value,d="/img/categories/".concat(h.trim().replace(/\s/g,"_"),".png"),e.prev=27,e.next=30,Ce(d);case 30:m=e.sent,e.next=37;break;case 33:e.prev=33,e.t3=e.catch(27),m="",d="/img/logos/company_placeholder.png";case 37:for(f=[],g=[],y=[],v=[],b=!0,j=!1,E=void 0,e.prev=44,k=n[h][Symbol.iterator]();!(b=(O=k.next()).done);b=!0)x=O.value,z(f,x.employees),z(g,x.projects),z(y,x.skills),v.push(x.id);e.next=52;break;case 48:e.prev=48,e.t4=e.catch(44),j=!0,E=e.t4;case 52:e.prev=52,e.prev=53,b||null==k.return||k.return();case 55:if(e.prev=55,!j){e.next=58;break}throw E;case 58:return e.finish(55);case 59:return e.finish(52);case 60:o.push({id:p++,name:h,category:"Categories",type:"category",list:n[h],hours:n[h].length,selected:!1,color:m,highlight:!0,textHighlight:!1,logo:d,projects:g,employees:f,skills:y,clients:v}),e.next=24;break;case 63:return o.sort(function(e,t){return t.list.length-e.list.length}),console.log(o),w=Ne(o),Oe=o.length,console.log(w),console.log(w[Oe].list),w[Oe].hours=w[Oe].list.length,w[Oe].list.sort(function(e,t){return t.hours-e.hours}),e.abrupt("return",{id:p++,name:"Categories",category:"Categories",type:"root",list:w,hours:0,color:"#000",selected:!1,highlight:!0,textHighlight:!1,projects:[],employees:[],clients:[],skills:[],logo:""});case 72:case"end":return e.stop()}},e,null,[[4,8,12,20],[13,,15,19],[27,33],[44,48,52,60],[53,,55,59]])}))).apply(this,arguments)}function Ne(e){if(!e)return e;for(var t=e.slice(0,Oe),n={id:-1,name:"More",category:e[0].category,type:"more",highlight:!0,color:"#2D2A32",hours:0,selected:!1,list:[],projects:[],employees:[],clients:[],skills:[],logo:"/img/categories/more.png"},a=Oe;a<e.length;a++){var r,s;n.hours+=e[a].hours,n.list.push(e[a]),z(n.employees,e[a].employees),(r=n.projects).push.apply(r,Object(h.a)(e[a].projects)),"category"===e[a].type?(s=n.clients).push.apply(s,Object(h.a)(Ie(e[a].list))):n.clients.push(e[a].id),z(n.skills,e[a].skills)}return t.push(n),t}function Ie(e){var t=[],n=!0,a=!1,r=void 0;try{for(var s,i=e[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var c=s.value;"category"===c.type?t.push.apply(t,Object(h.a)(Ie(e))):t.push(c.id)}}catch(l){a=!0,r=l}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return t}var Me="YYYY-MM-DD";function Te(){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(p.a)(u.a.mark(function e(){var t,n,a,r,s,i,c,l;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re();case 2:return t=e.sent,n=t.projectList,a=t.employeeList,r=t.technologyList,s=t.clientList,i=t.unsortedClients,c=t.projectsCount,e.next=11,De(s);case 11:return(l=e.sent).clients=s.map(function(e,t){return t}),l.projects=n.map(function(e,t){return t}),l.employees=a.map(function(e,t){return t}),l.skills=r.map(function(e,t){return t}),e.abrupt("return",{categories:l,projectList:n,employeeList:a,technologyList:r,clientList:s,unsortedClients:i,projectsCount:c});case 17:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Re(){return ze.apply(this,arguments)}function ze(){return(ze=Object(p.a)(u.a.mark(function e(){var t,n,a,r,s,i,c,l,o,p,h,d,m,f,g,y,v,b,j,E,k,O,x,w,S,C,P,D,L,N,I,M,T,A,R,Y;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=function(e,t){var n,a=e.split(",").map(function(e){return e.trim()}),r=t?t.split(",").map(function(e){return e.trim()}):[],s=a[0];if(a.length===r.length){var i=r[r.length-1].split("-"),c=i[0],l=i[1];n=F()("".concat(c,"-").concat(l)).endOf("month").format(Me)}else n=F()().format(Me);return{startDate:s,endDate:n}},i=function(e){return e.map(function(e){return j.find(function(t){return t.name.toLowerCase()===e.toLowerCase()}).id})},s=function(e,t,n){Object.keys(n).forEach(function(a){var r=n[a];void 0!==j[r]&&(j[r].projects.push(t),j[r].clients.includes(e)||j[r].clients.push(e))})},r=function(e,t,n,a,r){y[e].projects.includes(t)||y[e].projects.push(t),y[e].hours+=n,z(y[e].employees,a),z(y[e].skills,r)},a=function(e){return 0===e.length?-1:e.map(function(e){return y.find(function(t){return t.name.toLowerCase()===e.toLowerCase()}).color})},n=function(e){return 0===e.length?-1:e.map(function(e){return y.find(function(t){return t.name.toLowerCase()===e.toLowerCase()}).id})},t=function(e,t,n,a){return 0===e.length?[]:e.map(function(e){var r=v.find(function(t){return t.name.toLowerCase()===e.toLowerCase()});return r?(t&&!r.clients.includes(t)&&r.clients.push(t),n&&!r.projects.includes(n)&&r.projects.push(n),a&&!r.employees.includes(a)&&r.employees.push(a)):(r={id:E++,name:e,highlight:!1,clients:t?[t]:[],projects:n?[n]:[],employees:a?[a]:[]},v.push(r)),r.id})},e.next=9,fe();case 9:if(l=e.sent,o=l.employees){e.next=13;break}return e.abrupt("return",Error);case 13:return e.next=15,ye();case 15:if(p=e.sent,h=p.clients){e.next=19;break}return e.abrupt("return",Error);case 19:return e.next=21,be();case 21:if(d=e.sent,m=d.projects){e.next=25;break}return e.abrupt("return",Error);case 25:return e.next=27,Ee();case 27:if(f=e.sent,g=f.projectsCount){e.next=31;break}return e.abrupt("return",Error);case 31:y=[],v=[],b=[],j=[],E=0,k=!0,O=!1,x=void 0,e.prev=39,w=o[Symbol.iterator]();case 41:if(k=(S=w.next()).done){e.next=57;break}return C=S.value,P=void 0,e.prev=44,P="img/employees/".concat([C.firstName,C.lastName].join("_").replace(/\s/g,"_"),".jpg"),e.next=48,Pe(P);case 48:e.next=53;break;case 50:e.prev=50,e.t0=e.catch(44),P=null;case 53:j.push({id:C.id,name:"".concat(C.firstName," ").concat(C.lastName),highlight:!0,brushedDisplay:!0,roll:"".concat(C.role?C.role:""),img:P,dateInit:F()("".concat(C.startYear,"-01-01")).format(Me),dateEnd:"".concat(C.endYear?F()(C.endYear+"-01-01").format(Me):F()().format(Me)),location:C.location,birthYear:C.birthYear,skills:t(C.technologies,void 0,void 0,C.id),projects:[],clients:[]});case 54:k=!0,e.next=41;break;case 57:e.next=63;break;case 59:e.prev=59,e.t1=e.catch(39),O=!0,x=e.t1;case 63:e.prev=63,e.prev=64,k||null==w.return||w.return();case 66:if(e.prev=66,!O){e.next=69;break}throw x;case 69:return e.finish(66);case 70:return e.finish(63);case 71:D=!0,L=!1,N=void 0,e.prev=74,I=h[Symbol.iterator]();case 76:if(D=(M=I.next()).done){e.next=93;break}return T=M.value,A="/img/logos/".concat(T.name.trim().replace(/\s/g,"_"),".png"),e.prev=79,e.next=82,Ce(A);case 82:R=e.sent,e.next=89;break;case 85:e.prev=85,e.t2=e.catch(79),R="",A="/img/logos/company_placeholder.png";case 89:y.push({id:T.id,name:T.name,hours:0,color:R,logo:A,highlight:!0,projects:[],category:T.category,description:T.description?T.description:"",location:T.location,type:"client",employees:[],skills:[],list:[]});case 90:D=!0,e.next=76;break;case 93:e.next=99;break;case 95:e.prev=95,e.t3=e.catch(74),L=!0,N=e.t3;case 99:e.prev=99,e.prev=100,D||null==I.return||I.return();case 102:if(e.prev=102,!L){e.next=105;break}throw N;case 105:return e.finish(102);case 106:return e.finish(99);case 107:return y.push({id:y.length,name:"Other",hours:0,color:"#3E5641",logo:"/img/logos/company_placeholder.png",highlight:!0,projects:[],category:"Other",description:"Projects without client.",location:"",type:"client",employees:[],skills:[],list:[]}),Object.keys(m).forEach(function(e){var l=m[e],o=c(l.startDates,l.endDates),u=o.startDate,p=o.endDate,d=Math.floor(F.a.duration(F()(p).diff(F()(u))).asHours()),f=n(l.client),g=a(l.client);f=-1===f?h.length:f[0];var y=i(l.employees),v=t(l.technologies,f,l.id);r(f,l.id,d,y,v),s(f,l.id,y),b.push({id:l.id,name:l.name,highlight:!0,brushedDisplay:!0,type:l.type?l.type:"Normal",description:l.description,clientId:f,employees:y,dateInit:new Date(u),dateEnd:new Date(p),skills:v,color:g,hours:d})}),Y=[].concat(y),y.sort(function(e,t){return t.hours-e.hours}),e.abrupt("return",{projectList:b,employeeList:j,technologyList:v,clientList:y,unsortedClients:Y,projectsCount:g});case 112:case"end":return e.stop()}},e,null,[[39,59,63,71],[44,50],[64,,66,70],[74,95,99,107],[79,85],[100,,102,106]])}))).apply(this,arguments)}function Ye(e,t){return t.map(function(t){return t.highlight=e,t})}function Be(e,t,n,a){return n.map(function(n){return t.includes(n.id)===a&&(n.highlight=e),n})}function Fe(e,t,n,a){return n.map(function(n){return t.includes(n.id)===a&&(n.textHighlight=e),n})}function He(e){return e.map(function(e){return e.textHighlight=!1,e})}function Ge(e,t){var n=[],a=t.map(function(t){return t.skills.includes(e)?(t.highlight=!0,n.includes(t.clientId)||n.push(t.clientId)):t.highlight=!1,t});return[n,a]}function Ve(e,t){return t.find(function(t){return t.id===e})}function We(e,t,n,a){return e.map(function(e){var r=_e(t,e.dateInit),s=_e(t,e.dateEnd);return e.brushedDisplay=a-r>=0&&s-n>=0,e})}function Je(e,t){return e.map(function(e){var n=0;return t.filter(function(t){return t.clientId===e.id}).forEach(function(e){n+=e.brushedDisplay?e.hours:0}),e.hours=n,e})}function _e(e,t){return b.z.count(e,t)}function qe(e,t){return F()(t).add(e,"M").format("MMM YYYY")}function Ke(e){return e.map(function(e){return e.brushedDisplay=!0})}function Ue(e,t){var n=t.clients.map(function(t){return t.selected=e.clients.includes(t.id),t}),a=t.employees.map(function(t){return t.selected=e.employees.includes(t.id),t}),r=t.skills.map(function(t){return t.selected=e.skills.includes(t.id),t});return{employees:a,clients:n,projects:t.projects.map(function(t){return t.selected=e.projects.includes(t.id),t}),skills:r}}function Xe(e,t,n){return n.filter(function(n){return!(e.includes(n)&&!t.includes(n))})}function $e(e){return Array.from(new Set(e))}function Qe(e,t){var n=Object(h.a)(e.clients),a=Object(h.a)(e.employees),r=Object(h.a)(e.skills),s=Object(h.a)(e.projects);switch(t.searchType){case"EMPLOYEE":a=$e([].concat(Object(h.a)(a),[t.id])),r=$e([].concat(Object(h.a)(r),Object(h.a)(t.skills))),s=$e([].concat(Object(h.a)(s),Object(h.a)(t.projects))),n=$e([].concat(Object(h.a)(n),Object(h.a)(t.clients)));break;case"CLIENT":n=$e([].concat(Object(h.a)(n),[t.id])),s=$e([].concat(Object(h.a)(s),Object(h.a)(t.projects))),a=$e([].concat(Object(h.a)(a),Object(h.a)(t.employees))),r=$e([].concat(Object(h.a)(r),Object(h.a)(t.skills)));break;case"PROJECT":s=$e([].concat(Object(h.a)(s),[t.id])),a=$e([].concat(Object(h.a)(a),Object(h.a)(t.employees))),r=$e([].concat(Object(h.a)(r),Object(h.a)(t.skills))),n=$e([].concat(Object(h.a)(n),[t.clientId]));break;case"SKILL":r=$e([].concat(Object(h.a)(r),[t.id])),s=$e([].concat(Object(h.a)(s),Object(h.a)(t.projects))),a=$e([].concat(Object(h.a)(a),Object(h.a)(t.employees))),n=$e([].concat(Object(h.a)(n),Object(h.a)(t.clients)));break;default:return e}return{employees:Array.from(new Set(a)),clients:Array.from(new Set(n)),projects:Array.from(new Set(s)),skills:Array.from(new Set(r))}}function Ze(e,t,n,a){var r=e.clients,s=e.employees,i=e.skills,c=e.projects,l=null,o=function(e,t){var n=[],a=[],r=[],s=[],i=[];return e.forEach(function(e){switch(e.searchType){case"EMPLOYEE":a=[].concat(Object(h.a)(a),[e.id]),r=[].concat(Object(h.a)(r),Object(h.a)(e.skills)),s=[].concat(Object(h.a)(s),Object(h.a)(e.projects)),n=[].concat(Object(h.a)(n),Object(h.a)(e.clients)),i=[].concat(Object(h.a)(i),Object(h.a)(e.locations));break;case"CLIENT":n=[].concat(Object(h.a)(n),[e.id]),s=[].concat(Object(h.a)(s),Object(h.a)(e.projects)),a=[].concat(Object(h.a)(a),Object(h.a)(e.employees)),r=[].concat(Object(h.a)(r),Object(h.a)(e.skills));break;case"PROJECT":s=[].concat(Object(h.a)(s),[e.id]),a=[].concat(Object(h.a)(a),Object(h.a)(e.employees)),r=[].concat(Object(h.a)(r),Object(h.a)(e.skills)),n=[].concat(Object(h.a)(n),[e.clientId]);break;case"SKILL":r=[].concat(Object(h.a)(r),[e.id]),s=[].concat(Object(h.a)(s),Object(h.a)(e.projects)),a=[].concat(Object(h.a)(a),Object(h.a)(e.employees)),n=[].concat(Object(h.a)(n),Object(h.a)(e.clients))}}),{clients:$e(n),employees:$e(a),skills:$e(r),projects:$e(s)}}(function(e,t){return e.map(function(e){switch(e.searchType){case"EMPLOYEE":return e=t.employees.find(function(t){return t.id===e.id});case"CLIENT":return e=t.clients.find(function(t){return t.id===e.id});case"PROJECT":return e=t.projects.find(function(t){return t.id===e.id});case"SKILL":return e=t.skills.find(function(t){return t.id===e.id});default:return e}})}(a,n));switch(t.searchType){case"EMPLOYEE":s=Xe([(l=n.employees.find(function(e){return t.id===e.id})).id],o.employees,s),i=Xe(l.skills,o.skills,i),c=Xe(l.projects,o.projects,c),r=Xe(l.clients,o.clients,r);break;case"CLIENT":r=Xe([(l=n.clients.find(function(e){return e.id===t.id})).id],o.clients,r),s=Xe(l.employees,o.employees,s),i=Xe(l.skills,o.skills,i),c=Xe(l.projects,o.projects,c);break;case"PROJECT":c=Xe([(l=n.projects.find(function(e){return e.id===t.id})).id],o.projects,c),s=Xe(l.employees,o.employees,s),i=Xe(l.skills,o.skills,i),r=Xe([l.clientId],o.clients,r);break;case"SKILL":i=Xe([(l=n.skills.find(function(e){return e.id===t.id})).id],o.skills,i),s=Xe(l.employees,o.employees,s),c=Xe(l.projects,o.projects,c),r=Xe(l.clients,o.clients,r);break;default:return e}return{employees:s,clients:r,projects:c,skills:i}}function et(e){var t=e.map(function(e){return F()(e.dateInit)}),n=e.map(function(e){return F()(e.dateEnd)});return[F.a.min(t).toDate(),F.a.max(n).toDate()]}function tt(e,t){var n=[];return e.forEach(function(e){n=e.brushedDisplay?[].concat(Object(h.a)(n),Object(h.a)(e.employees)):n}),t.map(function(e){return e.brushedDisplay=!!n.includes(e.id),e})}var nt=window.innerWidth,at=window.innerHeight,rt=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).showSkill=function(e){var t=Ge(e,n.state.projects),a=Be(!1,t[0],n.state.annularSectors,!1),r=Ge(e,n.state.filteredEmployees),s=Be(!0,[e],n.state.skills,!0);n.setState({skills:s,projects:t[1],annularSectors:a,filteredEmployees:r})},n.showProject=function(e){var t=Ve(e,n.state.projects),a=Be(!1,t.employees,n.state.filteredEmployees,!1),r=Be(!1,[e],n.state.filteredProjects,!1),s=Be(!1,[t.clientId],n.state.annularSectors,!1),i=Be(!0,t.skills,n.state.filteredSkills,!0);n.setState({annularSectors:s,filteredSkills:i,filteredProjects:r,filteredEmployees:a,highlightedProject:t});var c=Ve(t.clientId,n.state.annularSectors);n.toggleDialogue(),n.modifyDialogueInfo(Object(d.a)({},t,{clientName:c.name,logo:c.logo}),"PROJECT")},n.showEmployee=function(e){var t=Ve(e,n.state.filteredEmployees),a=n.state.filteredProjects.filter(function(t){return t.brushedDisplay&&t.employees.includes(e)}).map(function(e){return e.id}),r=n.state.annularSectors.filter(function(e){return 0!==e.projects.filter(function(e){return a.includes(e)}).length}).map(function(e){return e.id}),s=Be(!1,[e],n.state.filteredEmployees,!1),i=Be(!1,r,n.state.annularSectors,!1),c=Be(!1,a,n.state.filteredProjects,!1),l=Be(!0,t.skills,n.state.filteredSkills,!0);n.setState({annularSectors:i,filteredProjects:c,filteredEmployees:s,filteredSkills:l,highlightedEmployee:t}),n.toggleDialogue(),n.modifyDialogueInfo(t,"EMPLOYEE")},n.showClient=function(e){var t=Ve(e,n.state.annularSectors),a=Be(!1,[e],n.state.annularSectors,!1);a="client"!==t.type?Fe(!0,[e],a,!0):a;var r=[];r="category"===t.type?R(t.projects,n.state.projects):"more"===t.type?R(t.projects,n.state.projects).filter(function(e){return e.brushedDisplay}):n.state.filteredProjects.filter(function(t){return t.brushedDisplay&&t.clientId===e});var s=Be(!1,t.employees.filter(function(e){return 0!==r.filter(function(t){return t.employees.includes(e)}).length}),n.state.filteredEmployees,!1),i=Be(!1,t.projects,n.state.filteredProjects,!1),c=[];r.forEach(function(e){return z(c,e.skills)});var l="client"===t.type?Be(!0,c,n.state.filteredSkills,!0):n.state.filteredSkills;n.setState({annularSectors:a,filteredSkills:l,filteredEmployees:s,filteredProjects:i,highlightedClient:t}),"client"===t.type&&(n.toggleDialogue(),n.modifyDialogueInfo(t,"CLIENT"))},n.unHighlightElements=function(e,t,a,r){e=e||n.state.annularSectors,t=t||n.state.filteredProjects,a=a||n.state.filteredEmployees,r=r||n.state.filteredSkills,n.state.dialogueIsShown&&n.toggleDialogue(!1);var s=Ye(!0,e);s=He(s);var i=Ye(!0,t),c=Ye(!0,a),l=Ye(!1,r);n.setState({annularSectors:s,filteredSkills:l,filteredProjects:i,filteredEmployees:c,highlightedClient:null,highlightedProject:null,highlightedEmployee:null})},n.toggleDialogue=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];n.setState({dialogueIsShown:e})},n.getProjectLogo=function(e){return n.state.clients.find(function(t){return t.projects.includes(e)}).logo},n.addSelectedObject=function(e){var t={clients:n.state.clients,projects:n.state.projects,employees:n.state.employees,skills:n.state.skills},a={clients:n.state.filteredClients,projects:n.state.filteredProjects,employees:n.state.filteredEmployees,skills:n.state.filteredSkills},r=Qe(n.state.selected,e),s=Ue(r,t),i=Ue(r,a),c={id:e.id,name:e.name,searchType:e.searchType};n.setState({selected:r,selectedObjects:[].concat(Object(h.a)(n.state.selectedObjects),[c]),clients:s.clients,employees:s.employees,projects:s.projects,skills:s.skills,filteredClients:i.clients,filteredEmployees:i.employees,filteredProjects:i.projects,filteredSkills:i.skills})},n.removeSelectedObject=function(e){var t={clients:n.state.clients,projects:n.state.projects,employees:n.state.employees,skills:n.state.skills},a=n.state.selectedObjects.filter(function(t){return t.id!==e.id||t.type!==e.type}),r=Ze(n.state.selected,e,t,a),s=Ue(r,t);n.setState({selectedObjects:a,selected:r,clients:s.clients,employees:s.employees,projects:s.projects,skills:s.skills})},n.brushDates=function(e,t){var a=We(n.state.filteredProjects,n.state.datesBrushed[0],e,t),r=null===n.state.filteredClients?null:Je(n.state.filteredClients,a),s=tt(a,n.state.filteredEmployees);n.setState({refreshLegends:!n.state.refreshLegends,filteredProjects:a,filteredClients:r,filteredEmployees:s,filterPosition:[e,t]})},n.getDateFormated=function(e){return qe(e,n.state.datesBrushed[0])},n.highlightElements=function(e){var t=n.state.filteredClients,a=n.state.filteredEmployees,r=n.state.filteredProjects,s=n.state.filteredSkills;switch(e){case"EMPLOYEES":t=Ye(!1,t),r=Ye(!1,r);break;case"CLIENTS":a=Ye(!1,a),r=Ye(!1,r);break;case"PROJECTS":t=Ye(!0,t),a=Ye(!1,a),r=Ye(!0,r);break;case"SKILLS":t=Ye(!1,t),r=Ye(!1,r),a=Ye(!1,a),s=Ye(!0,s)}n.setState({clients:t,filteredProjects:r,filteredEmployees:a,filteredSkills:s})},n.modifyDialogueInfo=function(e,t){n.setState({dialogueInfo:{data:e,type:t}})},n.handleClick=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=R(e.employees,n.state.employees),r=0===e.list.length?[e]:Ne(e.list);console.log(r);var s=0===e.list.length?null:R(e.clients,n.state.unsortedClients),i=R(e.projects,n.state.projects).sort(function(e,t){return t.hours-e.hours}),c=[];a.forEach(function(e){return z(c,e.skills)}),z(c,e.skills);var l="root"===e.type?n.state.skills:R(c,n.state.skills),o=n.setClickedClient(e,t),u="more"===e.type?e.category:""===o.id?e.name:o.name,p=We(i,n.state.datesBrushed[0],n.state.filterPosition[0],n.state.filterPosition[1]),h="root"===e.type?Ke(n.state.employees):tt(p,n.state.employees),d=0===e.list.length||null===e.list?[e]:Je(s,p),m=!n.containsCategory(e);n.setState({currentView:u,clickedClient:o,filteredClients:d,filteredProjects:p,filteredEmployees:h,displayTimeline:m,refreshLegends:!n.state.refreshLegends}),n.unHighlightElements(r,i,a,l)},n.state={clients:[],unsortedClients:[],clickedClient:[],projects:[],employees:[],skills:[],filteredClients:[],filteredProjects:[],filteredEmployees:[],filteredSkills:[],projectsCount:[],size:[nt,at],isLoading:!0,isMobileView:!1,dialogueIsShown:!1,initialDates:[],datesBrushed:[],totalProjectsMonths:0,elementOver:{type:"none",info:null},dialogueInfo:{},displayTimeline:!1,filterPosition:[],selectedObjects:[],selected:{employees:[],clients:[],category:[],projects:[],skills:[],annularSector:[]},highlightedClient:null,highlightedProject:null,highlightedEmployee:null,refreshLegends:!1},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark(function e(){var t,n,a,r,s,i,c,l,o,p;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("resize",this.resize.bind(this)),this.resize(),this.setState({isLoading:!0}),e.next=5,Te();case 5:t=e.sent,n=t.categories,a=t.projectList,r=t.employeeList,s=t.technologyList,i=t.clientList,c=t.unsortedClients,l=t.projectsCount,o=et(a),p=_e(o[0],o[1]),this.setState({initialDates:o,datesBrushed:o,totalProjectsMonths:p,isLoading:!1,clients:i,unsortedClients:c,projects:a,projectsCount:l,employees:r,skills:s,filteredClients:i,filteredProjects:a,filteredEmployees:r,filteredSkills:s,range:o,clickedClient:n,filterPosition:[0,p],annularSectors:n.list,currentView:n.name});case 16:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resize",value:function(){this.setState({isMobileView:window.innerWidth<=1180})}},{key:"setClickedClient",value:function(e,t){return t?{id:"",name:"",type:"",list:[]}:"category"!==e.type&&"more"!==e.type||1!==e.list.length?e:e.list[0]}},{key:"containsCategory",value:function(e){return"client"!==e.type&&("root"===e.type||("category"===e.list[0].type||void 0))}},{key:"render",value:function(){var e=r.a.createElement("div",{className:"mobile-message"},r.a.createElement("div",{className:"logo d-flex large"},r.a.createElement("div",{className:"spacing-h small"}),r.a.createElement("h1",null,"FindOut Visualization")),r.a.createElement("div",{className:"spacing"}),r.a.createElement("p",null,"Please visit us from a desktop, this visualization is not responsive....")),t=r.a.createElement(oe,{clients:this.state.clients,projects:this.state.projects,employees:this.state.employees,skills:this.state.skills,clickedClient:this.state.clickedClient,breadcrumbClick:this.handleClick,showObjectInformation:this.modifyDialogueInfo,toggleDialogue:this.toggleDialogue,addSelectedObject:this.addSelectedObject,selectedObjects:this.state.selectedObjects,removeSelectedObject:this.removeSelectedObject,getProjectLogo:this.getProjectLogo}),n=r.a.createElement(pe,{title:this.state.currentView,isHighlighted:this.state.highlightedClient||this.state.highlightedProject||this.state.highlightedEmployee}),a=r.a.createElement(Y,{projectsCount:this.state.projectsCount,clients:this.state.filteredClients,projects:this.state.filteredProjects,employees:this.state.filteredEmployees,skills:this.state.filteredSkills,client:this.state.highlightedClient,project:this.state.highlightedProject,employee:this.state.highlightedEmployee,overEvent:this.highlightElements,outEvent:this.unHighlightElements,refreshLegends:this.state.refreshLegends}),s=r.a.createElement(V,{dialogueIsShown:this.state.dialogueIsShown,toggleDialogue:this.toggleDialogue,dialogueInfo:this.state.dialogueInfo}),i=r.a.createElement(X,{size:this.state.size,displayTimeline:this.state.displayTimeline,filterPosition:this.state.filterPosition,totalProjectsMonths:this.state.totalProjectsMonths,range:this.state.range,annularSectors:this.state.annularSectors,projects:this.state.filteredProjects,employees:this.state.filteredEmployees,selectProject:this.showProject,mouseOutProject:this.unHighlightElements,modifyRange:this.brushDates,formatDate:this.getDateFormated}),c=r.a.createElement(T,{annularSectors:this.state.annularSectors,clients:this.state.filteredClients,employees:this.state.filteredEmployees,projects:this.state.filteredProjects,skills:this.state.filteredSkills,size:this.state.size,mouseOnClient:this.showClient,mouseOnEmployee:this.showEmployee,mouseOnProject:this.showProject,unHighlightElements:this.unHighlightElements,clientClick:this.handleClick});return r.a.createElement(r.a.Fragment,null,this.state.isMobileView?e:this.state.isLoading?r.a.createElement(ue,null):r.a.createElement(r.a.Fragment,null,t,n,a,s,c,i))}}]),t}(r.a.Component),st=(n(216),n(219)),it=n(220),ct=n(119),lt=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.history;return r.a.createElement("div",null,r.a.createElement(H.a,{className:"backBtn",onClick:function(){return e.goBack()}},r.a.createElement("i",{className:"fas fa-angle-double-left"}),"Back"),r.a.createElement($.a,{className:"header",variant:"header",expand:"lg"},r.a.createElement("div",{className:"h-row"},r.a.createElement("img",{src:"../img/logos/findOut.png",alt:"FindOut",className:"brandLogo"}))))}}]),t}(a.Component),ot=function(e){function t(){return Object(m.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("p",{className:"spinner"}))}}]),t}(r.a.Component),ut=function(e){var t="img/categories/".concat(e.trim().replace(/\s/g,"_"),".png");return"".concat("","/").concat(t)},pt=function(e){return new Promise(function(t,n){var a=new Image;a.onload=function(){return t()},a.onerror=function(){return n()},a.src="".concat("").concat(e)})},ht=function(e){return new Promise(function(t,n){var a=new we.a,r=new Image;r.src=e,r.onload=function(){var e=a.getColor(r);e=e.map(function(e){return 1===(e=parseInt(e).toString(16)).length?"0"+e:e}),t("#".concat(e.join("")))},r.onerror=function(){return n("#3E5641")}})},dt=function(e){function t(){return Object(m.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"addDefaultSrc",value:function(e){e.target.src="".concat("","/img/employees/employee_placeholder.jpg")}},{key:"render",value:function(){var e=this.props.profile,t=e.firstName,n=e.lastName,a=e.location,s=e.role,i=e.description,c=function(e){var t=e.firstName,n=e.lastName,a="img/employees/".concat([t,n].join("_").replace(/\s/g,"_"),".jpg");return"".concat("","/").concat(a)}({firstName:t,lastName:n});return r.a.createElement(st.a,{className:"profile"},r.a.createElement(it.a,null,r.a.createElement(ct.a,null,r.a.createElement("img",{src:c,onError:this.addDefaultSrc,alt:"".concat(t," ").concat(n)})),r.a.createElement(ct.a,null,r.a.createElement(it.a,null,r.a.createElement("h1",null,t," ",n)),r.a.createElement(it.a,null,r.a.createElement("h4",null,s)),r.a.createElement(it.a,null,r.a.createElement("h5",null,"Location: ",a)))),r.a.createElement("div",{className:"description"},i))}}]),t}(a.Component),mt=n(56);var ft=function(e){function t(){return Object(m.a)(this,t),Object(g.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"setText",value:function(e){return r.a.createElement("div",null,r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Client: "),r.a.createElement("br",null),e.client),r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"Start date: "),r.a.createElement("br",null),e.startDate),r.a.createElement("p",null,r.a.createElement("span",{className:"bold"},"End date: "),r.a.createElement("br",null),e.endDate),r.a.createElement("p",null,e.description))}},{key:"render",value:function(){var e=this.props,t=e.dialogueIsShown,n=e.dialogueInfo,a=n?this.setText(n):r.a.createElement("div",null);return r.a.createElement("div",null,r.a.createElement("div",{className:t?"dialogueBarchart":"dialogue hidden"},r.a.createElement("div",{className:"identification"},n?r.a.createElement("img",{src:n.img,alt:n.name}):r.a.createElement("i",{className:"fas fa-laptop-code"}),r.a.createElement("div",{className:"spacing x-small"}),r.a.createElement("h2",null,n?n.name:"")),r.a.createElement("div",{className:"information"},a)))}}]),t}(r.a.Component),gt=function(e){function t(e){var n;Object(m.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).showProject=function(e){n.setState({dialogueIsShown:!n.state.dialogueIsShown}),n.state.recentData!==e&&n.setState({dialogueIsShown:!0}),n.setState({recentData:e})},n.chart=function(){var e=[],t=0,a=Object.keys(n.state.data).map(function(a,r){var s={values:n.state.data[a],companyName:a,cummulative:t};return t+=n.state.data[a].length,n.state.data[a].map(function(t){s.color=t.color,e.push(r)}),s});console.log(n.state.data);var r=20,s=20,i=60,c=190,l=n.state.width-c-s,o=n.state.height-r-i,u=b.x(".rowChart").append("svg").attr("width",l+c+s).attr("height",o+r+i).append("g").attr("transform","translate("+c+","+r+")"),p=b.u().rangeRound([0,t>8?o:t<4?150:400]),h=b.t().rangeRound([0,o],.1).domain(e),d=h.bandwidth()*e.length;p.domain([0,d]);var m=b.v().range([0,l]);m.domain([0,b.q(a,function(e){return b.q(e.values,function(e){return Math.ceil(e.projectPeriod)})})]);var f=b.b().scale(m);f.ticks(5).tickSize(-o-5).tickPadding([10]),u.append("g").attr("transform","translate(0,"+o+")").attr("class","x axis").call(f).append("text").attr("dy",".10em").attr("fill","#000").style("text-anchor","end").text("Year").attr("transform","translate( -20 , 15 )");var g=u.selectAll(".category").data(a).enter().append("g").attr("class",function(e){return"category category-"+e.companyName}).attr("transform",function(e){return"translate(0,"+p(e.cummulative*h.bandwidth())+")"}).attr("fill",function(e){return e.color});g.selectAll(".category-label").data(function(e){return[e]}).enter().append("text").attr("class",function(e){return"category-label category-label-"+e.companyName}).attr("transform",function(e){return"translate(-5,"+p((e.values.length*h.bandwidth()+10)/2+4)+")"}).text(function(e){return e.companyName}).attr("text-anchor","end").attr("fill","#000"),g.selectAll(".defect").data(function(e){return e.values}).enter().append("g").attr("class",function(e){return"defect defect-"+e.name}).attr("transform",function(e,t){return"translate(0,"+p(t*h.bandwidth())+")"}).selectAll(".rect").data(function(e){return[e]}).enter().append("rect").attr("class","rect").attr("height",p(h.bandwidth()-10)).attr("y",function(e){return p(10)}).attr("x",m(0)).attr("width",function(e){return m(e.projectPeriod)}).on("mouseover",function(){b.x(this).style("opacity",.5)}).on("mouseout",function(){b.x(this).style("opacity",1)}).on("click",function(e){n.showProject(e)})};var a=function(e){var t={},n=!0,a=!1,r=void 0;try{for(var s,i=e[Symbol.iterator]();!(n=(s=i.next()).done);n=!0){var c=s.value;c.client in t?t[c.client].push(c):t[c.client]=[c]}}catch(l){a=!0,r=l}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}return{grouped:t}}(n.props.data).grouped;return n.state={data:a,width:800,height:650,recentData:[],dialogueIsShown:!1},n.showProject=n.showProject.bind(Object(mt.a)(n)),n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.chart()}},{key:"render",value:function(){return r.a.createElement("div",{className:"rowChart"},r.a.createElement(ft,{dialogueInfo:this.state.recentData,dialogueIsShown:this.state.dialogueIsShown}))}}]),t}(a.Component),yt=function(e){function t(e){var n;Object(m.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).onClicked=function(e){n.setState({currentCategory:e}),n.drawBubble(e)},n.drawBubble=function(e){var t,a="All"===e?n.props.technologies:n.state.categoryDataList[e],r=(a=a.filter(function(e){return"All"!==e.category})).length,s=b.x(".bubble"),i=document.body.clientWidth,c=+s.attr("height"),l=.5*i,o=.5*c,u=b.r().size([i,c]).padding(1.6),p=b.j(function(e){return e.r}),h=b.l().force("charge",b.k()).force("collide",p).force("center",b.i(l,o)).force("x",b.m(l).strength(.04)).force("y",b.n(o).strength(.04)),d=u(b.o({children:a}).sum(function(e){return e.value})).leaves().map(function(e){var t=e.data;return{x:l+2*(e.x-l),y:o+2*(e.y-o),r:0,R:t.color.R,G:t.color.G,B:t.color.B,radius:r>70?30:r>30?40:50,id:t.category+"."+t.name.replace(/\s/g,"-"),cat:t.category,name:t.name,icon:t.icon}});console.log(a.category),h.nodes(d).on("tick",function(){m.attr("transform",function(e){return"translate(".concat(e.x,",").concat(e.y,")")}).select("circle").attr("r",function(e){return e.r})}),b.y(".node").remove();var m=s.selectAll(".node").data(d).enter().append("g").attr("class","node").call(b.d().on("start",function(e){b.h.active||h.alphaTarget(.2).restart(),e.fx=e.x,e.fy=e.y}).on("drag",function(e){e.fx=b.h.x,e.fy=b.h.y}).on("end",function(e){b.h.active||h.alphaTarget(0),e.fx=null,e.fy=null}));m.append("circle").attr("id",function(e){return e.id}).attr("r",0).style("fill",function(e){return"rgb(".concat(e.R,",").concat(e.G,",").concat(e.B,")")}).transition().duration(2e3).ease(b.e).tween("circleIn",function(e){var t=b.p(0,e.radius);return function(n){e.r=t(n),h.force("collide",p)}}),m.append("text").selectAll("tspan").data(function(e){return e.name.split(" ")}).enter().append("tspan").style("fill","#fff").style("font-size",r>70?"0.8em":r>30?"1em":"1.2em").attr("x",0).attr("y",function(e,t,n){return 13+12*(t-n.length/2-.5)}).text(function(e){return e}),m.filter(function(e){return String(e.icon).includes("img/")}).append("image").classed("node-icon hidden",!0).attr("xlink:href",function(e){return e.icon}).attr("x",function(e){return.6*-e.radius}).attr("y",function(e){return.1*-e.radius}).attr("height",function(e){return 2*e.radius*.6}).attr("width",function(e){return 2*e.radius*.6}),m.append("title").selectAll("circle-overlay_title").data(function(e){return e.name.split(" ")}).style("fill","#fff").style("font-size","1.9em").attr("x",0).attr("y",function(e,t,n){return 13+12*(t-n.length/2-.5)}).text(function(e){return e.name}),m.on("click",function(e){b.h.stopPropagation();var n=e.R-50,a=e.G-50,r=e.B-50;console.log("currentNode",e);var s=b.h.currentTarget;if(e!==t){b.x(s).select("circle").style("fill","rgb(".concat(n,",").concat(a,",").concat(r,")")),b.y(".node-icon").classed("hidden",!0);var i=t;console.log(i),t=e,h.alphaTarget(.2).restart(),console.log(s),i&&(i.fx=null,i.fy=null,m.filter(function(e,t){return t===i.index}).transition().duration(2e3).ease(b.f).tween("circleOut",function(){var e=b.p(i.r,i.radius);return function(t){i.r=e(t)}}).on("interrupt",function(){console.log("interrupt"),i.r=i.radius}).select("circle").style("fill","rgb(".concat(i.R,",").concat(i.G,",").concat(i.B,")"))),b.B().duration(2e3).ease(b.f).tween("moveIn",function(){console.log("tweenMoveIn",e);var t=b.p(e.x,l),n=b.p(e.y,o),a=b.p(e.r,.2*o);return function(r){e.fx=t(r),e.fy=n(r),e.r=a(r),h.force("collide",p)}}).on("end",function(){h.alphaTarget(0),b.x(s).select(".node-icon").classed("hidden",!1)}).on("interrupt",function(){console.log("move interrupt",e),e.fx=null,e.fy=null,h.alphaTarget(0),b.x(s).select("circle").style("fill","rgb(".concat(e.R,",").concat(e.G,",").concat(e.B,")"))})}})};var a=n.props.technologies,r=[],s={},i=!0,c=!1,l=void 0;try{for(var o,u=a[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var p=o.value;p.category in r?r[p.category].push(p):r[p.category]=[p]}}catch(O){c=!0,l=O}finally{try{i||null==u.return||u.return()}finally{if(c)throw l}}var h=!0,d=!1,f=void 0;try{for(var v,j=a[Symbol.iterator]();!(h=(v=j.next()).done);h=!0){var E=v.value;s[E.category]=E.color}}catch(O){d=!0,f=O}finally{try{h||null==j.return||j.return()}finally{if(d)throw f}}var k=Object.keys(s)[0];return n.state={showData:[],legend:s,currentCategory:k,categoryDataList:r},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){this.drawBubble(this.state.currentCategory)}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.legend).map(function(t,n){var a=e.state.legend[t];return r.a.createElement("button",{className:"".concat(e.state.currentCategory===t?"underline":"underline hidden"," btn secondary"),key:n,id:t,onClick:function(){return e.onClicked(t)},style:{backgroundColor:"rgb(".concat(a.R,",").concat(a.G,",").concat(a.B,")")}},t)});return console.log(t),r.a.createElement("div",null,r.a.createElement("div",{className:"bubbleLegend"},t),r.a.createElement("svg",{className:"bubble",width:"100%",height:700,textAnchor:"middle"}))}}]),t}(a.Component);function vt(e){var t=e.map(function(e){return e.category}),n=100/t.length,a={};return t.map(function(e){return a[e]?a[e]=a[e]+n:a[e]=n}),Object.keys(a).map(function(e){return{value:a[e],label:e}})}function bt(e){return jt.apply(this,arguments)}function jt(){return(jt=Object(p.a)(u.a.mark(function e(t){var n,a,r,s,i,c,l,o,p,h,d;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n={},a=!0,r=!1,s=void 0,e.prev=4,i=t[Symbol.iterator]();!(a=(c=i.next()).done);a=!0)(l=c.value).category in n?n[l.category].push(l):n[l.category]=[l];e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),r=!0,s=e.t0;case 12:e.prev=12,e.prev=13,a||null==i.return||i.return();case 15:if(e.prev=15,!r){e.next=18;break}throw s;case 18:return e.finish(15);case 19:return e.finish(12);case 20:p=[],e.t1=u.a.keys(n);case 22:if((e.t2=e.t1()).done){e.next=37;break}return h=e.t2.value,d=ut(h),e.prev=25,e.next=28,ht(d);case 28:o=e.sent,e.next=34;break;case 31:e.prev=31,e.t3=e.catch(25),o="";case 34:p.push(o),e.next=22;break;case 37:return e.abrupt("return",p);case 38:case"end":return e.stop()}},e,null,[[4,8,12,20],[13,,15,19],[25,31]])}))).apply(this,arguments)}var Et=function(e){var t=e.pie,n=b.a().innerRadius(0).outerRadius(150);return t.map(function(e,t){var a=e.data.value.color;return r.a.createElement("g",{key:t},r.a.createElement("path",{d:n(e),fill:a}))})},kt=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={d3Data:[],d3Color:[]},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark(function e(){var t,n,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.projects,n=vt(t),e.next=4,bt(t);case 4:a=e.sent,this.setState({d3Data:n,d3Color:a});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this.state,t=e.d3Data,n=e.d3Color,a=0;a<t.length;a++)t[a].color=n[a];var s=b.s().sort(null).value(function(e){return e.value.value})(b.g(t));return r.a.createElement("div",null,r.a.createElement("svg",{height:400,width:400},r.a.createElement("g",{transform:"translate(".concat(200,",").concat(200,")")},r.a.createElement(Et,{pie:s,width:400,height:400}))),r.a.createElement("div",{className:"legendBox"},s.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("span",{style:{backgroundColor:e.data.value.color},className:"chart-label"}),r.a.createElement("span",null,e.data.value.label))})))}}]),t}(r.a.Component),Ot=function(){return r.a.createElement("div",{className:"mobile-message"},r.a.createElement("div",{className:"logo d-flex large"},r.a.createElement("div",{className:"spacing-h small"}),r.a.createElement("h1",null,"FindOut Visualization")),r.a.createElement("div",{className:"spacing"}),r.a.createElement("p",null,"Please visit us from a desktop, this visualization is not responsive...."))},xt="";function wt(e){return St.apply(this,arguments)}function St(){return(St=Object(p.a)(u.a.mark(function e(t){var n,a,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(xt,"/employee?id=").concat(t),a={url:n,responseType:"json",method:"GET"},e.prev=2,e.next=5,de()(a);case 5:r=e.sent,e.next=11;break;case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",{});case 11:if(200!==r.status){e.next=13;break}return e.abrupt("return",r.data);case 13:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}var Ct="YYYY-MM-DD";function Pt(e){return Dt.apply(this,arguments)}function Dt(){return(Dt=Object(p.a)(u.a.mark(function e(t){var n,a,r,s,i,c,l,o,p,h,d,m,f,g,y,v,b,j,E,k,O,x,w,S,C,P,D,L,N,I,M,T,A,R;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O=function(e){switch(e){case"Web":return{R:214,G:142,B:122};case"Tools":return{R:78,G:179,B:114};case"Database":return{R:209,G:199,B:54};case"Graphical":return{R:216,G:87,B:98};case"Programming/Skills":return{R:59,G:89,B:115};case"Productivity":return{R:222,G:143,B:76};case"Framework":return{R:124,G:105,B:144};case"Methodology":return{R:71,G:154,B:139};case"Environment":return{R:170,G:110,B:40};case"Other":return{R:117,G:165,B:214};case"All":return{R:154,G:58,B:58};default:return e}},E=function(e,t){var n,a=e.split(",").map(function(e){return e.trim()}),r=t?t.split(",").map(function(e){return e.trim()}):[],s=a[0];if(a.length===r.length){var i=r[r.length-1].split("-"),c=i[0],l=i[1];n=F()("".concat(c,"-").concat(l)).endOf("month").format(Ct)}else n=F()().format(Ct);return{startDate:s,endDate:n,endDateList:r,startDateList:a}},e.next=4,wt(t);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",Error);case 7:a=n.projects,r=n.technologies,s=[],i=!0,c=!1,l=void 0,e.prev=13,o=a[Symbol.iterator]();case 15:if(i=(p=o.next()).done){e.next=35;break}return h=p.value,d=E(h.startDates,h.endDates),m=d.startDate,f=d.endDate,g=d.endDateList,y=d.startDateList,v=Math.floor(F.a.duration(F()(f).diff(F()(m))).asMonths())/12,b="/img/logos/".concat(h.client.trim().replace(/\s/g,"_"),".png"),j=void 0,e.prev=21,e.next=24,ht(b);case 24:j=e.sent,e.next=31;break;case 27:e.prev=27,e.t0=e.catch(21),j="#3E5641",b="/img/logos/company_placeholder.png";case 31:s.push({id:h.id,name:h.name,category:h.category,client:h.client,startDate:m,endDate:g.length!==y.length?"Ongoing":f,description:h.description,img:"".concat("","/").concat(b),color:j,projectPeriod:v});case 32:i=!0,e.next=15;break;case 35:e.next=41;break;case 37:e.prev=37,e.t1=e.catch(13),c=!0,l=e.t1;case 41:e.prev=41,e.prev=42,i||null==o.return||o.return();case 44:if(e.prev=44,!c){e.next=47;break}throw l;case 47:return e.finish(44);case 48:return e.finish(41);case 49:k=[],e.t2=u.a.keys(r);case 51:if((e.t3=e.t2()).done){e.next=91;break}x=e.t3.value,w=r[x],console.log(x),S=!0,C=!1,P=void 0,e.prev=58,D=w[Symbol.iterator]();case 60:if(S=(L=D.next()).done){e.next=75;break}return N=L.value,I="../img/skills/".concat(N.trim().replace(/\s/g,"_"),".png"),e.prev=63,e.next=66,pt(I);case 66:e.next=71;break;case 68:e.prev=68,e.t4=e.catch(63),I=N;case 71:k.push({category:x,name:N,color:O(x),icon:I,value:1});case 72:S=!0,e.next=60;break;case 75:e.next=81;break;case 77:e.prev=77,e.t5=e.catch(58),C=!0,P=e.t5;case 81:e.prev=81,e.prev=82,S||null==D.return||D.return();case 84:if(e.prev=84,!C){e.next=87;break}throw P;case 87:return e.finish(84);case 88:return e.finish(81);case 89:e.next=51;break;case 91:for(0!==Object.entries(r).length&&k.push({category:"All",name:"all",color:O("All")}),M=[],T=0,A=k;T<A.length;T++)(R=A[T]).category in M?M[R.category].push(R):M[R.category]=[R];return k.sort(function(e,t){return M[t.category].length-M[e.category].length}),e.abrupt("return",{employeeProfile:n,projects:a,projectsBarChart:s,technology:k});case 96:case"end":return e.stop()}},e,null,[[13,37,41,49],[21,27],[42,,44,48],[58,77,81,89],[63,68],[82,,84,88]])}))).apply(this,arguments)}var Lt=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(g.a)(this,Object(y.a)(t).call(this,e))).state={isLoading:!0,profile:{},projects:[],projectsBarChartData:[],technologies:[]},n}return Object(v.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(u.a.mark(function e(){var t,n,a,r,s,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.params.id,window.addEventListener("resize",this.resize.bind(this)),this.resize(),this.setState({isLoading:!0}),e.next=6,Pt(t);case 6:n=e.sent,a=n.employeeProfile,r=n.projects,s=n.projectsBarChart,i=n.technology,this.setState({isLoading:!1,profile:a,projects:r,projectsBarChartData:s,technologies:i});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"resize",value:function(){this.setState({isMobileView:window.innerWidth<=0})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.isMobileView?r.a.createElement(Ot,null):this.state.isLoading?r.a.createElement(ot,null):r.a.createElement(st.a,null,r.a.createElement(lt,{history:this.props.history}),r.a.createElement(it.a,null,r.a.createElement(ct.a,{xs:12,md:8},r.a.createElement(dt,{profile:this.state.profile,projects:this.state.projects})),r.a.createElement(ct.a,{xs:6,md:4},r.a.createElement(kt,{projects:this.state.projects}))),0===this.state.projectsBarChartData.length?"":r.a.createElement(gt,{data:this.state.projectsBarChartData}),0===Object.entries(this.state.technologies).length?"":r.a.createElement(yt,{technologies:this.state.technologies})))}}]),t}(r.a.Component),Nt=function(){return r.a.createElement(c.a,null,r.a.createElement("div",{className:"app"},r.a.createElement(l.a,{exact:!0,path:"/employeeview/:id",render:function(e){return r.a.createElement(Lt,e)}}),r.a.createElement(l.a,{exact:!0,path:"/",render:function(){return r.a.createElement(rt,null)}})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(Nt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[121,1,2]]]);
//# sourceMappingURL=main.83eb4987.chunk.js.map